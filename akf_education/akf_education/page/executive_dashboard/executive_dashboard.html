<style>
    .leaflet-tooltip-card {
        background: #ffffff;
        border: none;
        border-radius: 12px;
        padding: 10px 14px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        font-size: 13px;
        line-height: 1.5;
        color: #333;
        transition: all 0.3s ease;
        display: inline-block;
        white-space: nowrap;
        max-width: unset;
    }

    .leaflet-tooltip-card h4 {
        margin: 0 0 6px 0;
        font-size: 15px;
        font-weight: 600;
        color: #2b4f81;
        line-height: 1.3;
        white-space: nowrap;
    }

    .leaflet-tooltip-card p {
        margin: 0;
        font-size: 13px;
        color: #444;
        white-space: nowrap;
    }

    .leaflet-tooltip-card small {
        display: block;
        margin-top: 6px;
        font-size: 11px;
        color: #888;
        white-space: nowrap;
    }

    .aghosh-list {
        padding-left: 18px;
        margin: 0;
        list-style: disc;
    }

    .aghosh-list li {
        margin-bottom: 4px;
    }

    h6.f-16 {
        font-size: 14px !important;
    }
</style>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />

    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <!-- Marker Cluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <!-- Marker Cluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
</head>

<div class="container-fluid dashboard" id="demopage_id" style="padding-bottom: 50px">
    <section class="graphs-section">
        <div class="container">
            <div class="row bullets-cards gx-4 gy-4">
                <!-- -->
                <div class="col-12 col-lg-4">
                    <div style="cursor: pointer" class="card operational-card rounded-lg fade-up bounce hover-shadow"
                        onclick="showOperationalHomes()">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="icon-box">
                                    <i class="fas fa-tools fa-2x"></i>
                                </div>
                                <div class="ms-3">
                                    <h5 class="numbers">{{ charts_data.operational_home[0].operational_count }}</h5>
                                    <h6 class="label">Operational Aghosh Homes</h6>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right toggle-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce hover-shadow" onclick="fetchUnderCounstructionHome()"
                        style="cursor: pointer">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="icon-box">
                                    <i class="fas fa-building fa-2x"></i>
                                </div>
                                <div class="ms-3">
                                    <h5 class="numbers">{{ charts_data.under_counstruction[0].under_counstruction_count
                                        }}</h5>
                                    <h6 class="label">Under Construction Aghosh Homes</h6>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right toggle-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce hover-shadow" onclick="fetchInactiveHomes()"
                        style="cursor:pointer">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="icon-box">
                                    <i class="fas fa-building fa-2x"></i>
                                </div>
                                <div class="ms-3">
                                    <h5 class="numbers">{{ charts_data.inactive[0].inactive_count }}</h5>
                                    <h6 class="label">Inactive Aghosh Homes</h6>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right toggle-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce hover-shadow">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-map-marker-alt fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">123</h5>
                                <h6 class="label">Number Of Children</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce hover-shadow">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-ban fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">45</h5>
                                <h6 class="label">Building Capicity</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce hover-shadow">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-times-circle fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">7</h5>
                                <h6 class="label">Bed Capicity</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-user-slash fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">{{unsponsored_childrens}}</h5>
                                <h6 class="label">Total No. of Unsponsored Children</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-hands-helping fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">{{sponsored_childrens}}</h5>
                                <h6 class="label">Total No. of Sponsored Children</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-file-alt fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">{{student_with_psychological_assessment[0].student_count}}</h5>
                                <h6 class="label">Child Psychological Assessment Report</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">

                    <div class="col-12 p-0 ">
                        <div class="card rounded-lg fade-up bounce ">
                            <div class="card-body d-flex align-items-center">
                                <div class="icon-box">
                                    <i class="fas fa-child fa-2x"></i>
                                </div>
                                <div class="ms-3">
                                    <h5 class="numbers">{{total_students}}</h5>
                                    <h6 class="label">Total No. of Children</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 p-0 mb-0">
                        <div class="card fade-up">
                            <h3>Status of Aghosh Homes</h3>
                            <div class="speedy-gauge">
                                <div id="speedygauge"> </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-8">
                    <div class="card fade-up" style="max-height: 100%">
                        <div class="statistics">
                            <h3>Children Statistics</h3>
                            <div id="children-statistics" class="chart-container"
                                style="width: 100%; min-height: 364px"></div>
                        </div>
                    </div>
                </div>



                <div class="col-12 col-lg-8">
                    <div class="card fade-up">
                        <div class="line-Chart">
                            <h3>No. of Aghosh Homes (2006 - Present)</h3>
                            <div id="container-aghosh" class="chart-container" style="width: 100%; min-height: 400px">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4 bullets-cards">
                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-images fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers" id="numbers2">{{activity_pictures[0].total_pictures}}</h5>
                                <h6 class="label">Activity Pictures</h6>
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-lg fade-up bounce">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-video fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">{{activity_videos[0].total_videos}}</h5>
                                <h6 class="label">Activity Videos</h6>
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-lg fade-up bounce">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-palette fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">{{drawing_activity[0].total_drawings}}</h5>
                                <h6 class="label">Children Drawings</h6>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-12">
                    <section class="map-section fade-up">
                        <div class="container p-0">
                            <div class="map-card">
                                <h2>Aghosh Homes Locations</h2>
                                <div class="map-container">
                                    <div id="container-map" class="container-map">
                                        Loading map...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>



                <div class="col-12 col-lg-4 bullets-cards">
                    <div class="card rounded-lg fade-up bounce d-none">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-heartbeat fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <!-- <h5 class="numbers">{{ APRs[0].total_count }}</h5> -->
                                <h6 class="label">APRs</h6>
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-id-card fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">???</h5>
                                <h6 class="label f-16">Profiles</h6>
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-lg fade-up bounce ">
                        <div class="card-body d-flex align-items-center">
                            <div class="icon-box">
                                <i class="fas fa-file-medical fa-2x"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="numbers">???</h5>
                                <h6 class="label f-16">Scanned Results</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-8">
                    <div class="card fade-up">
                        <div class="line-Chart">
                            <h3>No. of Children from 2006 till Date</h3>
                            <div id="container-children" class="chart-container" style="width: 100%; min-height: 410px">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card fade-up">
                        <div class="line-Chart">
                            <h3>APRs</h3>
                            <div id="container_aghosh2" class="chart-container" style="width: 100%; min-height: 400px">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </section>
</div>

<script>
    // function fetchOperationalAghoshHomes() {
    //   frappe.call({
    //     method: "akf_education.akf_education.page.executive_dashboard.executive_dashboard.get_operational_aghosh_homes",
    //     callback: function (r) {
    //       console.log("Operational Aghosh Homes:", r.message);
    //     },
    //     error: function (err) {
    //       console.error("Error fetching operational homes", err);
    //     }
    //   });
    // }


    // function fetchUnderCounstructionHome() {
    //   frappe.call({
    //     method: "akf_education.akf_education.page.executive_dashboard.executive_dashboard.get_underCounstruction",
    //     callback: function (r) {
    //       console.log("Under construction", r.message);
    //     },
    //     error: function (err) {
    //       console.error("Error fetching", err)
    //     }
    //   })
    // }

    // function fetchInactiveHomes() {
    //   frappe.call({
    //     method: "akf_education.akf_education.page.executive_dashboard.executive_dashboard.get_inactive_homes",
    //     callback: function (r) {
    //       console.log("Inactive Home:", r.message);
    //     },
    //     error: function (err) {
    //       console.error("Error fetching", err)
    //     }
    //   })
    // }
</script>